<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Northern Journey - A Norse Fishing Village Saga</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Top Bar -->
    <div id="top-bar" class="top-bar">
        <div class="top-bar-left">
            <span id="date-display">Deep Winter, Day 1</span>
            <span id="weather-display">Howling Gale</span>
            <span id="population-display">üë• 16 (4 Sick)</span>
        </div>
        <div class="top-bar-center">
            <div class="status-meter">
                <span class="meter-icon">üî•</span>
                <div class="meter-bar">
                    <div class="meter-fill warmth" id="warmth-bar" style="width: 60%"></div>
                </div>
                <span class="meter-label">WARMTH</span>
                <span class="meter-level" id="warmth-level">GOOD</span>
            </div>
            <div class="status-meter">
                <span class="meter-icon">üçñ</span>
                <div class="meter-bar">
                    <div class="meter-fill sustenance" id="sustenance-bar" style="width: 50%"></div>
                </div>
                <span class="meter-label">SUSTENANCE</span>
                <span class="meter-level" id="sustenance-level">MODERATE</span>
            </div>
            <div class="status-meter">
                <span class="meter-icon">üëÅÔ∏è</span>
                <div class="meter-bar">
                    <div class="meter-fill dread" id="dread-bar" style="width: 20%"></div>
                </div>
                <span class="meter-label">DREAD</span>
                <span class="meter-level" id="dread-level">LOW</span>
            </div>
        </div>
    </div>

    <!-- Event Panel (appears when story event is triggered) -->
    <div id="event-panel" class="event-panel" style="display: none;">
        <div class="event-panel-content">
            <div class="event-portraits">
                <div class="portrait-box">üë§</div>
                <div class="portrait-box">‚öîÔ∏è</div>
            </div>
            <div class="event-details">
                <h2 id="event-panel-title">THE JARL'S COUNCIL: A Dispute of Blood and Oats</h2>
                <p id="event-panel-description">A bitter dispute has erupted in the village. Erik the farmer accuses Bjorn the hunter of stealing his winter oats. The matter has come before you, and both men demand justice.</p>
                <div class="event-options" id="event-options">
                    <button class="event-option-btn" onclick="window.game.selectEventOption(0)">
                        <div class="option-text">[OPTION A: Execute Erik]</div>
                        <div class="option-consequence">Consequence: Lose 1 Warrior, Dread increases</div>
                    </button>
                    <button class="event-option-btn" onclick="window.game.selectEventOption(1)">
                        <div class="option-text">[OPTION B: Banish Bjorn]</div>
                        <div class="option-consequence">Consequence: Lose 1 Hunter, Food production decreases</div>
                    </button>
                    <button class="event-option-btn" onclick="window.game.selectEventOption(2)">
                        <div class="option-text">[OPTION C: Force a compromise]</div>
                        <div class="option-consequence">Consequence: Both parties lose morale, but village remains stable</div>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Game Area -->
    <div class="game-container">
        <!-- Left Panel - Resources -->
        <div class="left-panel">
            <div class="panel-section">
                <h3>‚õèÔ∏è RESOURCES</h3>
                <div class="resource-category">
                    <h4>FUEL</h4>
                    <div class="resource-item">
                        <span>ü™µ Driftwood:</span>
                        <span id="driftwood">12</span>
                    </div>
                    <div class="resource-item">
                        <span>üå≤ Timber:</span>
                        <span id="timber">8</span>
                    </div>
                </div>
                <div class="resource-category">
                    <h4>FOOD</h4>
                    <div class="resource-item">
                        <span>üêü Dried Fish:</span>
                        <span id="dried-fish">20</span>
                    </div>
                    <div class="resource-item">
                        <span>‚ùÑÔ∏è Icicle Fish:</span>
                        <span id="icicle-fish">5</span>
                    </div>
                    <div class="resource-item">
                        <span>ü•£ Porridge:</span>
                        <span id="porridge">10</span>
                    </div>
                    <div class="resource-item">
                        <span>üêÑ Livestock:</span>
                        <span id="livestock">3</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Center - Phaser Game Canvas -->
        <div id="game-canvas" class="game-canvas"></div>

        <!-- Right Panel - Actions -->
        <div class="right-panel">
            <div class="panel-section">
                <h3>üî® BUILD</h3>
                <button class="action-btn" onclick="window.game.build('smokehouse')">Smokehouse</button>
                <button class="action-btn" onclick="window.game.build('palisade')">Palisade</button>
                <button class="action-btn" onclick="window.game.build('pyre')">Pyre</button>
            </div>
            <div class="panel-section">
                <h3>üë• MANAGE</h3>
                <button class="action-btn" onclick="window.game.manage('jobs')">Jobs</button>
                <button class="action-btn" onclick="window.game.manage('rationing')">Rationing</button>
            </div>
            <div class="panel-section">
                <h3>‚ö° RITUALS</h3>
                <button class="action-btn" onclick="window.game.ritual('saga')">Tell Saga</button>
                <button class="action-btn" onclick="window.game.ritual('sacrifice')">Sacrifice</button>
                <button class="action-btn" onclick="window.game.ritual('feast')">Feast</button>
            </div>
        </div>
    </div>

    <!-- Bottom Bar -->
    <div class="bottom-bar">
        <!-- Event Log -->
        <div class="event-log" id="event-log">
            <div class="log-entry">&gt; Day 1: The village awakens to a cold dawn...</div>
        </div>
        
        <!-- End Day Button -->
        <div class="end-day-container">
            <button class="btn-end-day" id="btn-end-day" onclick="window.game.endDay()">END DAY</button>
        </div>
    </div>

    <!-- Event Popup (hidden by default) -->
    <div id="event-popup" class="event-popup" style="display: none;">
        <div class="event-content">
            <div class="event-portrait">üë§</div>
            <h2 id="event-title">THE JARL'S COUNCIL</h2>
            <p id="event-text">A dispute has arisen...</p>
            <div class="event-choices">
                <button class="choice-btn" onclick="window.game.chooseEvent(0)">Option 1</button>
                <button class="choice-btn" onclick="window.game.chooseEvent(1)">Option 2</button>
                <button class="choice-btn" onclick="window.game.chooseEvent(2)">Option 3</button>
            </div>
        </div>
    </div>

    <!-- Load Phaser 3 -->
    <script src="lib/phaser.min.js"></script>
    <!-- Alternative: CDN version (uncomment if local version not available) -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/phaser@3.90.0/dist/phaser.min.js"></script> -->
    
    <!-- Load game code -->
    <script src="js/game.js"></script>
</body>
</html>
